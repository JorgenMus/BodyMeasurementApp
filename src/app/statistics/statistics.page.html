<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Stats</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="goToUsers()">Users</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  @if (!selectedUserId || !selectedUser) {
    <div class="ion-text-center">
      <h2>No user selected</h2>
      <p>Please select a user first.</p>
      <ion-button (click)="goToUsers()">Go to Users</ion-button>
    </div>

  } @else {

    <div class="ion-margin-bottom">
      <h2 style="margin: 0;">{{ selectedUser.name }}</h2>
      <p style="margin: 4px 0 0 0; opacity: 0.8;">Charts from your measurements</p>
    </div>

    @if (measurements.length === 0) {
      <div class="ion-text-center">
        <p>No measurements yet.</p>
        <p style="opacity: 0.8;">Add at least one measurement to see graphs.</p>
      </div>

    } @else {

      <!-- If all charts are null, show message -->
      @if (
        !weightChartUrl &&
        !upperChestChartUrl &&
        !bellyChartUrl &&
        !bottomChartUrl &&
        !bicepsLChartUrl &&
        !bicepsRChartUrl &&
        !thighLChartUrl &&
        !thighRChartUrl
      ) {
        <div class="ion-text-center">
          <p>No chart data available.</p>
          <p style="opacity: 0.8;">You added measurements, but none of the chart values were filled.</p>
        </div>
      } @else {

        <!-- Weight -->
        @if (weightChartUrl) {
          <div class="chart-card">
            <img [src]="weightChartUrl" alt="Weight chart" loading="lazy" />
          </div>
        }

        <!-- Upper chest -->
        @if (upperChestChartUrl) {
          <div class="chart-card">
            <img [src]="upperChestChartUrl" alt="Upper chest chart" loading="lazy" />
          </div>
        }

        <!-- Belly -->
        @if (bellyChartUrl) {
          <div class="chart-card">
            <img [src]="bellyChartUrl" alt="Belly chart" loading="lazy" />
          </div>
        }

        <!-- Bottom -->
        @if (bottomChartUrl) {
          <div class="chart-card">
            <img [src]="bottomChartUrl" alt="Bottom chart" loading="lazy" />
          </div>
        }

        <!-- Biceps L -->
        @if (bicepsLChartUrl) {
          <div class="chart-card">
            <img [src]="bicepsLChartUrl" alt="Biceps left chart" loading="lazy" />
          </div>
        }

        <!-- Biceps R -->
        @if (bicepsRChartUrl) {
          <div class="chart-card">
            <img [src]="bicepsRChartUrl" alt="Biceps right chart" loading="lazy" />
          </div>
        }

        <!-- Thigh L -->
        @if (thighLChartUrl) {
          <div class="chart-card">
            <img [src]="thighLChartUrl" alt="Thigh left chart" loading="lazy" />
          </div>
        }

        <!-- Thigh R -->
        @if (thighRChartUrl) {
          <div class="chart-card">
            <img [src]="thighRChartUrl" alt="Thigh right chart" loading="lazy" />
          </div>
        }

      }
    }
  }

</ion-content>